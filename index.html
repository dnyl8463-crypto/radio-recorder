<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>专 拽转 专</title>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Assistant', sans-serif; background-color: #f4f7f6; margin: 0; padding: 20px; text-align: center; }
        .container { max-width: 800px; margin: auto; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; margin-bottom: 5px; }
        .subtitle { color: #7f8c8d; margin-bottom: 30px; }
        .date-group { margin-top: 30px; border-top: 2px solid #eee; padding-top: 15px; }
        .date-title { background: #34495e; color: white; display: inline-block; padding: 5px 18px; border-radius: 20px; font-weight: bold; margin-bottom: 15px; }
        .recording-item { display: flex; align-items: center; justify-content: space-between; background: #fff; margin: 10px 0; padding: 15px; border: 1px solid #ddd; border-radius: 10px; transition: 0.3s; }
        .recording-item:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.05); }
        .info { text-align: right; flex-grow: 1; }
        .station-name { font-weight: bold; color: #2c3e50; font-size: 1.1em; text-transform: capitalize; }
        .time-label { color: #95a5a6; font-size: 0.9em; }
        audio { height: 35px; margin-right: 15px; }
        #loading { font-size: 1.2em; color: #7f8c8d; margin-top: 50px; }
    </style>
</head>
<body>

<div class="container">
    <h1> Radio Archive</h1>
    <p class="subtitle">拽转 转 砖注 专</p>
    
    <div id="loading">注 拽转 砖专转...</div>
    <div id="recordings-list"></div>
</div>

<script>
    const USER = 'dnyl8463-crypto';
    const REPO = 'radio-recorder';

    async function fetchRecordings() {
        try {
            const response = await fetch(`https://api.github.com/repos/${USER}/${REPO}/releases`);
            const releases = await response.json();
            const listDiv = document.getElementById('recordings-list');
            document.getElementById('loading').style.display = 'none';

            if (!releases || !releases.length) {
                listDiv.innerHTML = "<p> 爪 拽转 专注.</p>";
                return;
            }

            let html = '';
            
            releases.forEach(release => {
                const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                const dateStr = new Date(release.created_at).toLocaleDateString('he-IL', dateOptions);

                html += `<div class="date-group"><div class="date-title">${dateStr}</div>`;

                release.assets.forEach(asset => {
                    if (asset.name.endsWith('.mp3')) {
                        // 抓 砖 转 砖注 转 砖 拽抓
                        // : Kol_Chai_14-00.mp3
                        const fileName = asset.name.replace('.mp3', '');
                        const parts = fileName.split('_');
                        
                        // 砖注  转 拽 专 (砖 14-00)
                        const timeStr = parts.pop().replace('-', ':');
                        //  砖专  砖 转 (砖 Kol Chai)
                        const stationName = parts.join(' ');

                        html += `
                            <div class="recording-item">
                                <audio controls preload="none">
                                    <source src="${asset.browser_download_url}" type="audio/mpeg">
                                </audio>
                                <div class="info">
                                    <div class="station-name">${stationName}</div>
                                    <div class="time-label">砖注: ${timeStr}</div>
                                </div>
                            </div>
                        `;
                    }
                });
                html += `</div>`;
            });

            listDiv.innerHTML = html;
        } catch (error) {
            console.error("Error:", error);
            document.getElementById('loading').innerHTML = "砖 注转 拽爪.";
        }
    }

    fetchRecordings();
</script>

</body>
</html>
